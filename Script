local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local TextChatService = game:GetService("TextChatService")

-- Load Rayfield library
local loadFunc = loadstring or load
local Rayfield = loadFunc(game:HttpGet('https://raw.githubusercontent.com/SiriusSoftwareLtd/Rayfield/main/source.lua'))()

-- Create Rayfield window
local Window = Rayfield:CreateWindow({
    Name = "GUI c00lVoid_8",
    LoadingTitle = "c00lVoid_8 Menu Version: 0.4",
    LoadingSubtitle = "By: c00lVoid_8",
    ConfigurationSaving = {
        Enabled = false,
        FolderName = nil,
        FileName = "c00lVoid_8_Config"
    }
})

-- Create main tab
local Tab = Window:CreateTab("Main", nil) -- Icon can be added if needed

-- Universal chat function (supports old and new chat systems)
local function chatCmd(msg)
    if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
        -- New chat system
        TextChatService.TextChannels.RBXGeneral:SendAsync(msg)
    else
        -- Old chat system
        ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(msg, "All")
    end
end

-- SyncAPI setup (shared for textures, Skybox, Unanchor, etc.)
local player = game.Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()

-- Update char on player death
player.CharacterAdded:Connect(function(newCharacter)
    char = newCharacter
end)

local tool

for _, v in player:GetDescendants() do
    if v.Name == "SyncAPI" then
        tool = v.Parent
    end
end

for _, v in game.ReplicatedStorage:GetDescendants() do
    if v.Name == "SyncAPI" then
        tool = v.Parent
    end
end

local remote = tool.SyncAPI.ServerEndpoint

function _(args)
    remote:InvokeServer(unpack(args))
end

function CreatePart(cf, parent)
    _( {"CreatePart", "Normal", cf, parent} )
end

function SetAnchor(part, state)
    _( {"SyncAnchor", { {["Part"] = part, ["Anchored"] = state} }} )
end

function AddMesh(part)
    _( {"CreateMeshes", { {["Part"] = part} }} )
end

function SetMesh(part, meshid)
    _( {"SyncMesh", { {["Part"] = part, ["MeshId"] = "rbxassetid://" .. meshid} }} )
end

function SetTexture(part, texid)
    _( {"SyncMesh", { {["Part"] = part, ["TextureId"] = "rbxassetid://" .. texid} }} )
end

function MeshResize(part, size)
    _( {"SyncMesh", { {["Part"] = part, ["Scale"] = size} }} )
end

function SetCollision(part, boolean)
    _( {"SyncCollision", { {["Part"] = part, ["CanCollide"] = boolean} }} )
end

function DestroyPart(part)
    _( {"Remove", {part}} )
end

function MovePart(part, cf)
    _( {"SyncMove", { {["Part"] = part, ["CFrame"] = cf} }} )
end

function Resize(part, size, cf)
    _( {"SyncResize", { {["Part"] = part, ["CFrame"] = cf, ["Size"] = size} }} )
end

function SetName(part, stringg)
    _( {"SetName", {part}, stringg} )
end

function Weld(part1, part2, lead)
    _( {"CreateWelds", {part1, part2}, lead} )
end

function SetLocked(part, boolean)
    _( {"SetLocked", {part}, boolean} )
end

function SetTrans(part, int)
    _( {"SyncMaterial", { {["Part"] = part, ["Transparency"] = int} }} )
end

function CreateSpotlight(part)
    _( {"CreateLights", { {["Part"] = part, ["LightType"] = "SpotLight"} }} )
end

function SyncLighting(part, brightness)
    _( {"SyncLighting", { {["Part"] = part, ["LightType"] = "SpotLight", ["Brightness"] = brightness} }} )
end

function Color(part, color)
    _( {"SyncColor", { {["Part"] = part, ["Color"] = color, ["UnionColoring"] = false} }} )
end

function SpawnDecal(part, side)
    _( {"CreateTextures", { {["Part"] = part, ["Face"] = side, ["TextureType"] = "Decal"} }} )
end

function AddDecal(part, asset, side)
    _( {"SyncTexture", { {["Part"] = part, ["Face"] = side, ["TextureType"] = "Decal", ["Texture"] = "rbxassetid://" .. asset} }} )
end

-- Function 1: Change Textures (apply decals to all sides)
local function spam(id)
    for _, v in game.Workspace:GetDescendants() do
        if v:IsA("BasePart") then
            spawn(function()
                SetLocked(v, false)
                SpawnDecal(v, Enum.NormalId.Front)
                AddDecal(v, id, Enum.NormalId.Front)
                SpawnDecal(v, Enum.NormalId.Back)
                AddDecal(v, id, Enum.NormalId.Back)
                SpawnDecal(v, Enum.NormalId.Right)
                AddDecal(v, id, Enum.NormalId.Right)
                SpawnDecal(v, Enum.NormalId.Left)
                AddDecal(v, id, Enum.NormalId.Left)
                SpawnDecal(v, Enum.NormalId.Bottom)
                AddDecal(v, id, Enum.NormalId.Bottom)
                SpawnDecal(v, Enum.NormalId.Top)
                AddDecal(v, id, Enum.NormalId.Top)
            end)
        end
    end 
end

Tab:CreateButton({
    Name = "Change Textures",
    Callback = function()
        spam("97941139489452")
    end
})

-- Function 2: Change Skybox
local function Sky(id)
    local hrp = char:WaitForChild("HumanoidRootPart")
    local cf = hrp.CFrame
    CreatePart(CFrame.new(cf.Position + Vector3.new(0, 6, 0)), workspace)
    for _, v in workspace:GetDescendants() do
        if v:IsA("BasePart") and v.Position == cf.Position + Vector3.new(0, 6, 0) then
            SetAnchor(v, true)
            AddMesh(v)
            SetMesh(v, "111891702759441")
            SetTexture(v, id)
            MeshResize(v, Vector3.new(3000, 3000, 3000))
        end
    end
end

Tab:CreateButton({
    Name = "Change Skybox",
    Callback = function()
        Sky("97941139489452")
    end
})

-- Function 3: Reset World (clear world, create Baseplate, spawn, and decal block)
Tab:CreateButton({
    Name = "Reset World",
    Callback = function()
        -- Clear world
        for _, obj in pairs(workspace:GetChildren()) do
            if obj ~= game.Players.LocalPlayer.Character then
                DestroyPart(obj)
            end
        end
        
        -- Create Baseplate
        local baseplateCF = CFrame.new(0, 0, 0)
        CreatePart(baseplateCF, workspace)
        for _, v in workspace:GetDescendants() do
            if v:IsA("BasePart") and v.Position == Vector3.new(0, 0, 0) then
                SetName(v, "Baseplate")
                Resize(v, Vector3.new(2048, 20, 2048), baseplateCF)
                SetAnchor(v, true)
            end
        end
        
        -- Create spawn
        local spawnCF = CFrame.new(0, 10, 0)
        CreatePart(spawnCF, workspace)
        for _, v in workspace:GetDescendants() do
            if v:IsA("BasePart") and v.Position == Vector3.new(0, 10, 0) then
                SetName(v, "SpawnLocation")
                Resize(v, Vector3.new(10, 1, 10), spawnCF)
                SetAnchor(v, true)
            end
        end
        
        -- Create block with decal (offset by 25 units on Z, resized)
        local blockCF = CFrame.new(0, 15, 25) -- Offset by 25 units on Z
        CreatePart(blockCF, workspace)
        for _, v in workspace:GetDescendants() do
            if v:IsA("BasePart") and v.Position == Vector3.new(0, 15, 25) then
                SetName(v, "DecalBlock")
                Resize(v, Vector3.new(10, 7, 5), blockCF) -- X=10 (left 5 + right 5), Y=7 (top 5 + bottom 2), Z=5
                SetAnchor(v, true)
                SpawnDecal(v, Enum.NormalId.Front)
                AddDecal(v, "97941139489452", Enum.NormalId.Front)
            end
        end
    end
})

-- Function 4: Create Baseplate (separate button)
Tab:CreateButton({
    Name = "Create Baseplate",
    Callback = function()
        local baseplateCF = CFrame.new(0, 0, 0)
        CreatePart(baseplateCF, workspace)
        for _, v in workspace:GetDescendants() do
            if v:IsA("BasePart") and v.Position == Vector3.new(0, 0, 0) then
                SetName(v, "Baseplate")
                Resize(v, Vector3.new(2048, 20, 2048), baseplateCF)
                SetAnchor(v, true)
            end
        end
    end
})

-- Function 5: Play Music (using chatCmd)
Tab:CreateButton({
    Name = "Play Music",
    Callback = function()
        chatCmd(";music 77484784570543 ;pitch 0.09 ;volume 10000")
    end
})

-- Function 6: Give Btools (using chatCmd)
Tab:CreateButton({
    Name = "Give Btools",
    Callback = function()
        chatCmd(";btools")
    end
})

-- Function: Hint
Tab:CreateButton({
    Name = "Hint",
    Callback = function()
        chatCmd(";h Team c00lVoid_8 Join Today! | By: c00lVoid_8")
    end
})

-- Function 7: Disco (using chatCmd)
Tab:CreateButton({
    Name = "Disco",
    Callback = function()
        chatCmd(";disco ;fog 0.3")
    end
})

-- Function 8: Unanchor All
local function unanchorAll()
    for _, v in game.Workspace:GetDescendants() do
        spawn(function()
            SetLocked(v, false)
            SetAnchor(v, false)
        end)
    end
end

Tab:CreateButton({
    Name = "Unanchor All",
    Callback = function()
        unanchorAll()
    end
})

-- Function 9: Skeleton Skybox (cycle through specified texture IDs)
local skyboxConnection = nil
local skyboxPart = nil

local function skeletonSkybox()
    if skyboxConnection then
        skyboxConnection:Disconnect()
        skyboxConnection = nil
        if skyboxPart then
            DestroyPart(skyboxPart)
            skyboxPart = nil
        end
        return
    end
    
    local hrp = char:WaitForChild("HumanoidRootPart")
    local cf = CFrame.new(hrp.Position + Vector3.new(0, 6, 0))
    CreatePart(cf, workspace)
    for _, v in workspace:GetDescendants() do
        if v:IsA("BasePart") and v.Position == cf.Position then
            skyboxPart = v
            SetName(v, "SkeletonSkybox")
            SetAnchor(v, true)
            AddMesh(v)
            SetMesh(v, "111891702759441")
            MeshResize(v, Vector3.new(8000, 8000, 8000))
        end
    end
    
    local textureIds = {
        "114128626690223",
        "121121601582400",
        "103772438482613",
        "132406330493067",
        "132406330493067",
        "103772438482613",
        "121121601582400",
        "114128626690223"
    }
    local textureIndex = 1
    local changeInterval = 0.25 -- Seconds between texture changes
    local elapsedTime = 0
    
    skyboxConnection = RunService.Heartbeat:Connect(function(deltaTime)
        if not char or not char:FindFirstChild("HumanoidRootPart") or not skyboxPart then
            if skyboxConnection then
                skyboxConnection:Disconnect()
                skyboxConnection = nil
            end
            if skyboxPart then
                DestroyPart(skyboxPart)
                skyboxPart = nil
            end
            return
        end
        
        elapsedTime = elapsedTime + deltaTime
        if elapsedTime >= changeInterval then
            SetTexture(skyboxPart, textureIds[textureIndex])
            textureIndex = textureIndex % #textureIds + 1
            elapsedTime = 0
        end
        
        -- Update position to follow player
        local newCF = CFrame.new(char:WaitForChild("HumanoidRootPart").Position + Vector3.new(0, 6, 0))
        MovePart(skyboxPart, newCF)
    end)
end

Tab:CreateButton({
    Name = "Skeleton Skybox",
    Callback = function()
        skeletonSkybox()
    end
})

-- Function 10: Titler (using chatCmd)
Tab:CreateButton({
    Name = "Titler",
    Callback = function()
        chatCmd(";titler me c00lVoid_8")
    end
})

-- Function idk: r6 (using chatCmd)
Tab:CreateButton({
    Name = "R6",
    Callback = function()
        chatCmd(";r6")
    end
})

-- Function idk: re (using chatCmd)
Tab:CreateButton({
    Name = "RE",
    Callback = function()
        chatCmd(";re")
    end
})

-- Function idk: Message (using chatCmd)
Tab:CreateButton({
    Name = "Message",
    Callback = function()
        chatCmd(";m Team c00lVoid_8 Join Today! | By: c00lVoid_8")
    end
})

Tab:CreateButton({
    Name = "Char all c00lVoid_8",
    Callback = function()
        chatCmd(";char all c00lVoid_8")
    end
})

Tab:CreateButton({
    Name = "Name all",
    Callback = function()
        chatCmd(";name all c00lVoid_8")
    end
})

-- Function 11: Fire All (using SyncAPI to set fire to all blocks and players)
local fireParts = {}

local function fireAll()
    -- Add fire to all BaseParts in workspace
    for _, v in pairs(game.Workspace:GetDescendants()) do
        if v:IsA("BasePart") and not fireParts[v] then
            spawn(function()
                SetLocked(v, false)
                CreateSpotlight(v)
                SyncLighting(v, 2)
                Color(v, Color3.new(1, 0.5, 0)) -- Orange fire color
                fireParts[v] = true
            end)
        end
    end

    -- Add fire to all players' HumanoidRootPart
    for _, p in pairs(Players:GetPlayers()) do
        if p.Character and p.Character:FindFirstChild("HumanoidRootPart") and not fireParts[p.Character.HumanoidRootPart] then
            local hrp = p.Character.HumanoidRootPart
            spawn(function()
                SetLocked(hrp, false)
                CreateSpotlight(hrp)
                SyncLighting(hrp, 2)
                Color(hrp, Color3.new(1, 0.5, 0)) -- Orange fire color
                fireParts[hrp] = true
            end)
        end
    end
end

Tab:CreateButton({
    Name = "Fire All",
    Callback = function()
        fireAll()
    end
})

-- Function 12: Rain c00lVoid_8 (blocks fall from sky with texture 97941139489452 on all sides)
local rainConnection = nil
local rainParts = {}

local function rainc00lVoid8()
    if rainConnection then
        rainConnection:Disconnect()
        rainConnection = nil
        for _, part in pairs(rainParts) do
            if part then
                DestroyPart(part)
            end
        end
        rainParts = {}
        return
    end

    rainConnection = RunService.Heartbeat:Connect(function()
        local hrp = char:WaitForChild("HumanoidRootPart")
        local spawnHeight = hrp.Position.Y + 100 -- Spawn blocks 100 units above player
        for i = 1, 10 do -- Create 10 blocks per frame
            local x = hrp.Position.X + math.random(-50, 50)
            local z = hrp.Position.Z + math.random(-50, 50)
            local cf = CFrame.new(x, spawnHeight, z)
            CreatePart(cf, workspace)
            for _, v in workspace:GetDescendants() do
                if v:IsA("BasePart") and (v.Position - cf.Position).Magnitude < 0.1 then
                    SetName(v, "RainBlock" .. i)
                    Resize(v, Vector3.new(2, 2, 2), cf)
                    SetAnchor(v, false)
                    SetCollision(v, true)
                    SetTrans(v, 0)
                    spawn(function()
                        spawn(function()
                            SpawnDecal(v, Enum.NormalId.Front)
                            AddDecal(v, "97941139489452", Enum.NormalId.Front)
                        end)
                        spawn(function()
                            SpawnDecal(v, Enum.NormalId.Back)
                            AddDecal(v, "97941139489452", Enum.NormalId.Back)
                        end)
                        spawn(function()
                            SpawnDecal(v, Enum.NormalId.Right)
                            AddDecal(v, "97941139489452", Enum.NormalId.Right)
                        end)
                        spawn(function()
                            SpawnDecal(v, Enum.NormalId.Left)
                            AddDecal(v, "97941139489452", Enum.NormalId.Left)
                        end)
                        spawn(function()
                            SpawnDecal(v, Enum.NormalId.Top)
                            AddDecal(v, "97941139489452", Enum.NormalId.Top)
                        end)
                        spawn(function()
                            SpawnDecal(v, Enum.NormalId.Bottom)
                            AddDecal(v, "97941139489452", Enum.NormalId.Bottom)
                        end)
                    end)
                    rainParts[v] = true
                    break
                end
            end
        end
    end)
end

Tab:CreateButton({
    Name = "Rain c00lVoid_8",
    Callback = function()
        rainc00lVoid8()
    end
})

-- Function 13: Skybox c00lkidd
local c00lkiddSkyboxPart = nil

local function c00lkiddSkybox()
    if c00lkiddSkyboxPart then
        DestroyPart(c00lkiddSkyboxPart)
        c00lkiddSkyboxPart = nil
        return
    end

    local hrp = char:WaitForChild("HumanoidRootPart")
    local cf = CFrame.new(hrp.Position + Vector3.new(0, 6, 0))
    CreatePart(cf, workspace)
    for _, v in workspace:GetDescendants() do
        if v:IsA("BasePart") and v.Position == cf.Position then
            c00lkiddSkyboxPart = v
            SetName(v, "c00lkiddSkybox")
            SetAnchor(v, true)
            AddMesh(v)
            SetMesh(v, "111891702759441")
            SetTexture(v, "158118263")
            MeshResize(v, Vector3.new(3000, 3000, 3000))
            break
        end
    end
end

Tab:CreateButton({
    Name = "c00lkidd Skybox",
    Callback = function()
        c00lkiddSkybox()
    end
})

-- Function 14: Decal Spam c00lkidd
Tab:CreateButton({
    Name = "c00lkidd Decal Spam",
    Callback = function()
        spam("158118263")
    end
})

-- Function 15: g00byd0lan Skybox
local g00byd0lanSkyboxPart = nil

local function g00byd0lanSkybox()
    if g00byd0lanSkyboxPart then
        DestroyPart(g00byd0lanSkyboxPart)
        g00byd0lanSkyboxPart = nil
        return
    end

    local hrp = char:WaitForChild("HumanoidRootPart")
    local cf = CFrame.new(hrp.Position + Vector3.new(0, 6, 0))
    CreatePart(cf, workspace)
    for _, v in workspace:GetDescendants() do
        if v:IsA("BasePart") and v.Position == cf.Position then
            g00byd0lanSkyboxPart = v
            SetName(v, "g00byd0lanSkybox")
            SetAnchor(v, true)
            AddMesh(v)
            SetMesh(v, "111891702759441")
            SetTexture(v, "120403563303015")
            MeshResize(v, Vector3.new(3000, 3000, 3000))
            break
        end
    end
end

Tab:CreateButton({
    Name = "g00byd0lan Skybox",
    Callback = function()
        g00byd0lanSkybox()
    end
})

-- Function 16: g00byd0lan Decal Spam
Tab:CreateButton({
    Name = "g00byd0lan Decal Spam",
    Callback = function()
        spam("120403563303015")
    end
})

-- Function 17: Spam Team
local teamSpamConnection = nil
local createdTeams = {}

local function spamTeam()
    if teamSpamConnection then
        teamSpamConnection:Disconnect()
        teamSpamConnection = nil
        for _, team in pairs(createdTeams) do
            if team then
                team:Destroy()
            end
        end
        createdTeams = {}
        return
    end

    teamSpamConnection = RunService.Heartbeat:Connect(function()
        for i = 1, 100 do
            local team = Instance.new("Team")
            team.Name = "c00lVoid_8 IS HERE"
            team.Parent = game:GetService("Teams")
            createdTeams[team] = true
        end
    end)
end

Tab:CreateButton({
    Name = "Spam Team",
    Callback = function()
        spamTeam()
    end
})

-- Function 18: c00lVoid_8 2 Skybox
local c00lVoid8_2SkyboxPart = nil

local function c00lVoid8_2Skybox()
    if c00lVoid8_2SkyboxPart then
        DestroyPart(c00lVoid8_2SkyboxPart)
        c00lVoid8_2SkyboxPart = nil
        return
    end

    local hrp = char:WaitForChild("HumanoidRootPart")
    local cf = CFrame.new(hrp.Position + Vector3.new(0, 6, 0))
    CreatePart(cf, workspace)
    for _, v in workspace:GetDescendants() do
        if v:IsA("BasePart") and v.Position == cf.Position then
            c00lVoid8_2SkyboxPart = v
            SetName(v, "c00lVoid_8 2 Skybox")
            SetAnchor(v, true)
            AddMesh(v)
            SetMesh(v, "111891702759441")
            SetTexture(v, "111450750967456")
            MeshResize(v, Vector3.new(3000, 3000, 3000))
            break
        end
    end
end

Tab:CreateButton({
    Name = "c00lVoid_8 2 Skybox",
    Callback = function()
        c00lVoid8_2Skybox()
    end
})

-- Function 19: c00lVoid_8 2 Decal Spam
Tab:CreateButton({
    Name = "c00lVoid_8 2 Decal Spam",
    Callback = function()
        spam("111450750967456")
    end
})

-- Close menu
Tab:CreateButton({
    Name = "Close",
    Callback = function()
        if skyboxConnection then
            skyboxConnection:Disconnect()
            skyboxConnection = nil
            if skyboxPart then
                DestroyPart(skyboxPart)
                skyboxPart = nil
            end
        end
        if rainConnection then
            rainConnection:Disconnect()
            rainConnection = nil
            for _, part in pairs(rainParts) do
                if part then
                    DestroyPart(part)
                end
            end
            rainParts = {}
        end
        if teamSpamConnection then
            teamSpamConnection:Disconnect()
            teamSpamConnection = nil
            for _, team in pairs(createdTeams) do
                if team then
                    team:Destroy()
                end
            end
            createdTeams = {}
        end
        if c00lVoid8_2SkyboxPart then
            DestroyPart(c00lVoid8_2SkyboxPart)
            c00lVoid8_2SkyboxPart = nil
        end
        Rayfield:Destroy()
    end
})
